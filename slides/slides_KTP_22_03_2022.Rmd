---
title: "Kogo obchodzi filozofia prawa? <br /> Co obchodzi filozofów prawa?"
subtitle: "Badanie metanaukowe"
author: "Piotr Bystranowski"
institute: "INCET UJ"
date: "15 marca 2022 r."
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["default", "default-fonts", "xaringan.css"]
    seal: false
    nature:
      titleSlideClass: [left, middle]
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false




---
class: title-slide-custom


# Kogo obchodzi filozofia prawa? <br /> Co obchodzi filozofów prawa?
## Badanie metanaukowe

.bottom[
.title-author[**Piotr Bystranowski**]

.title-author[INCET UJ] <br /><br />
.title-bottom[22 marca, 2022 r.<br />Katedra Teorii Prawa UJ]]
---
class: inverse
# Sieci (współ-)cytowań


--

.ex1[![description of the image](ex1.png)]

--

.ex2[![description of the image](ex2.png)]

--

.ex3[![description of the image](ex3.png)]

--

.ex4[![description of the image](ex4.png)]

---
.left-column[# Projekt]
.right-column[
.list1[
- Opierając się na sieci współcytowań:

.list2[
    
  * odnaleźć rdzeń współczesnej filozofii prawa,
* wyodrębnić jej główne obszary zainteresowań oraz
* opisać jej strukturę.]

- Przeanalizować stopień, w jakim różne obszary wchodzą ze sobą w interakcję.
- Przeanalizować, w jakim stopniu poszczególne obszary cytowane są poza filozofią prawa.
]

.bottom[**Źródło danych**: *openalex.org* (a także *philpapers.org* i *SCOPUS*)]
]

---
background-image: url(https://upload.wikimedia.org/wikipedia/commons/b/be/Sharingan_triple.svg)

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE, htmltools.preserve.raw = FALSE)
```

???

Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Sharingan_triple.svg)

---
class: inverse, center, middle

# Zbiór tekstów <br> i <br> budowa grafu


---
.left-column[
# Problem ]

.right-column[<br><br>
**Standardowo**: *zacznij od tesktów opublikowanych w czasopismach z danego obszaru*. <br><br>



**Ale**: <br>
.list2[
    * ważne artykuły w FP często publikowane poza czasopismami specjalistycznymi;
* kluczowe teksty w FP to książki.
]]
<br>

--

.right-column[
**Alternatywne podejście**:
.list2[
    * zacznij od tekstów opublikowanhych w czasopismach specjalistycznych *lub* sklasyfikowanych w *philpapers.org*;
* uzupełnij o teksty najczęściej cytowane i cytujące;
* na podstawie analizy współcytowań zidentyfikuj rdzeń takiego korpusu.
]]
{{content}}

---

# Proces



```{r flowchart, fig.width=12, echo=FALSE}
source("../src/flowchart.R")
flowchart
```

---

# Graf
.graph[
```{r, echo=FALSE, out.width="150%"}
 knitr::include_graphics("graph.png") 
```
]

---
class: inverse, center, middle
# Wykrywanie <br>i interpretacja <br>wspólnot

---

.left.column[# Wykrywanie <br>i interpretacja <br>wspólnot]
.right-column[Wykrywanie wspólnot przy pomocy algorytmu z Louvain.

(Z wielu możliwych podziałów trzeba wybrać najbardziej adekwatny/najciekawszy)

26 wspólnot (od 2 do 367 członków), w tym 19 zinterpretowanych.

Interpretacja wspólnot:
.list2[
    + analiza charakterystycznych słów z tytułów i abstraktów (*tf-idf*)
+ analiza najbardziej "prestiżowych" członków (*eigenvector centrality*)
]]

---

# Argumentation
.left_panel[
```{r, message=FALSE, echo=FALSE}
library(kableExtra)
source("../src/functions/labelClust.R")
nodes <- read.csv("../data/cits/nodes.csv") %>% labelClusts()
edges <- read.csv("../data/cits/edges.csv")
works <- read.csv("../data/raw/works_full.csv")
source("../src/functions/subgraphCentrality.R")
#DT::datatable(subgraphCentrality(0),
#  fillContainer = T, options = list(pageLength = 8))
knitr::kable(subgraphCentrality(0), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == 0) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tokenized <- read.csv("../data/text/tokenized.csv")
source("../src/graph_analysis.R")
tf_idf(0)
```
]
---
# General jurisprudence
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=12
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Punishment / Responsibility
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=11
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Justice and fairness
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=9
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Global justice
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=2
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Private law / Legal realism and descendants
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=7
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Constitutionalism / Legal pluralism 
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=5
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Criminal law
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=19
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Law and political theory
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=6
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Natural law and non-positivism
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=8
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# International (criminal) law
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=1
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Expert systems
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=13
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# New theories and reinterpretations
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=20
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Promising and reasonableness
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=21
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Classical natural law
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=23
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Legal epistemology
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=3
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Legal personhood
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=18
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Free speech
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=17
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---
# Kant / Kelsen
.left_panel[
```{r, message=FALSE, echo=FALSE}
k=4
knitr::kable(subgraphCentrality(k), format = 'html') %>% kable_styling(font_size = 12)
```
]

.right_top_panel[
*N* = `r nodes %>% filter(Modularity.Class == k) %>% nrow()`
]

.right_bottom_panel[
```{r, message=F, echo=F}
tf_idf(k)
```
]
---

# Graf
.graph[
```{r, echo=FALSE, out.width="150%"}
 knitr::include_graphics("graph.png") 
```
]
---
class: inverse, center, middle
# Analiza grafu

---

# Centralne teksty

```{r, message=FALSE, echo=FALSE}
#library(DT)
nodes %>%
 left_join(works) %>%
 select(first_author, display_name, eigen, betweenness, cluster_label) %>%
 mutate_at(c("eigen", "betweenness"), round, 2) %>%
 arrange(desc(eigen)) %>%
DT::datatable(
 fillContainer = F, options = list(pageLength = 10), elementId = "DT")
```

---

# Centralne wspólnoty

```{r, message=FALSE, echo=FALSE}
#library(DT)
nodes %>%
  filter(!is.na(cluster_label)) %>% left_join(works, by = "id") %>% 
 group_by(cluster_label) %>% 
summarise(n = n(), year = round(mean(publication_year, na.rm=T)), eigen=mean(eigen, na.rm=T), betweenness=mean(betweenness,  na.rm=T))%>% 
 mutate_at(c("eigen", "betweenness"), round, 2) %>%
 arrange(desc(betweenness)) %>% 
DT::datatable(
 fillContainer = F, options = list(pageLength = 10), elementId = "DT2")
```

---

.no_margin[Izolacja wewnątrz sieci]

```{r, echo=FALSE}
cits <- read.csv("../data/raw/cits.csv") %>% 
  filter(work %in% nodes$id, cit %in% nodes$id) %>% 
  distinct(work, cit, .keep_all = T)
source("../src/in_cit_analysis.R")
```

.pull-left[.subttl[Referencje]

```{r, echo=FALSE}
mean_citing %>% 
  knitr::kable() %>% 
  kable_styling(font_size = 10)
```

]

.pull-right[.subttl[Cytowania]
```{r, echo=FALSE}
mean_cited %>% 
  knitr::kable() %>% 
  kable_styling(font_size = 10)
```

]

---
# Cytowania wewnątrz sieci *netto*

```{r, echo=FALSE}
net_cits%>% 
  knitr::kable() %>% 
  kable_styling(font_size = 10)
```



---

# Geografia

```{r, message=FALSE, echo=FALSE}

insts <- read.csv("../data/raw/insts_full.csv")
nodes %>% 
  filter(!is.na(cluster_label)) %>% 
  left_join(insts, by = c("id" = "item")) %>% 
  filter(!is.na(country_code)) %>% 
  group_by(cluster_label) %>% 
  summarize(US = mean(country_code == "US", na.rm=T),
            non_US_English = mean(country_code %in% c("GB", "CA", "AU", "NZ", "IE"), na.rm=T),
            other = mean(!country_code %in% c("GB", "CA", "AU", "NZ", "IE", "US"), na.rm=T)) %>% 
  mutate_at(c("US", "non_US_English", "other"), round, 2) %>% 
 DT::datatable(
 fillContainer = F, options = list(pageLength = 10), elementId = "DT3")
```


---

# Prestiż typów publikacji

.pull-left[
```{r, message=FALSE, echo=FALSE}
nodes %>%
  left_join(works) %>%
  filter(!is.na(type)) %>%
  group_by(type) %>%
  summarize(n = n(), mean_eigen = round(mean(eigen, na.rm=T), 3)) %>%
  filter(n>20) %>%
  arrange(desc(mean_eigen)) %>% 
  knitr::kable() %>% kable_styling(font_size = 12)
 #DT::datatable(
 #fillContainer = F, options = list(pageLength = 10), elementId = "DT4")
```
]

--

.pull-right[
```{r, message=FALSE, warning=FALSE, echo=FALSE, fig.height=5}
nodes %>%
  left_join(works) %>%
  filter(publication_year>1960, cluster_label!="Argumentation") %>%
  filter(type %in% c("book", "journal-article")) %>%
  ggplot(aes(x=publication_year, y=eigen, color= type)) +
  geom_smooth(method = "lm")+
  #geom_point(alpha=0.4)+
  theme_minimal()
```
]

```{r, message=FALSE, warning=FALSE, echo=FALSE}
nodes %>%
  left_join(works) %>%
  filter(publication_year>1960) %>%
  filter(type %in% c("book", "journal-article")) %>%
  lm(eigen ~ type*publication_year, data = .) %>%
  broom::tidy() %>%
  mutate_at(c("estimate", "std.error", "statistic", "p.value"), round, 3) %>% 
   mutate(signif = gtools::stars.pval(p.value)) %>% 
  knitr::kable() %>% kable_styling(font_size = 12)
```

---
class: inverse, middle, center, hart
background-image: url("hart.jpeg")
background-size: contain
opacity: 0.5

# <h1 style="font-weight: bolder; text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000;">Kogo<br>obchodzi<br>filozofia prawa?</h1>

---
.left-column[# Cytowania<br>spoza<br>sieci]

.right-column[
Cytowania spoza sieci, z czasopism indeksowanych w Scopus (na ten moment)

Podział częściowo oparty na klasyfikacji Scopus:
  + filozofia prawa (14 czasopism)
  + prawo
  + filozofia
  + inne *social sciences*
  + inne *humanities*
  + inne

]

---

```{r, echo=FALSE, message=F}
read.csv("../data/cits/out_by_clust.csv") %>% 
  select(cluster, Philosophy.of.law, Law, Philosophy, Humanities, Social.sciences, Other) %>% 
  mutate_if(is.numeric, round, 2) %>% 
  DT::datatable(
 fillContainer = F, options = list(pageLength = 10), elementId = "DT4")
```
---
.left-column[
Konkluzja
]
--
.right-column[
.question[
?
]
]

---
class: middle, center
.pull-left[
<br><br><br><br>
# Dziękuję za uwagę!


github.com/bystry89/legal_philo<br><br><br>
bystry89.github.io/legal_philo/slides/slides_KTP_22_03_2022.html
<br><br><br><br>
.xaringan[
Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).


The chakra comes from [remark.js](https://remarkjs.com), [**knitr**](https://yihui.org/knitr/), and [R Markdown](https://rmarkdown.rstudio.com).
]
]
.pull-right[
.image-right[
```{r echo = FALSE}
knitr::include_graphics("incet.png")
```
]]


